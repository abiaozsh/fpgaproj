
int char_table[] = {
0x00000000,0x00000000,0x00000000,0x00000000, 
0x00007E81,0xA58181BD,0x9981817E,0x00000000, 
0x00007EFF,0xDBFFFFC3,0xE7FFFF7E,0x00000000, 
0x00000000,0x6CFEFEFE,0xFE7C3810,0x00000000, 
0x00000000,0x10387CFE,0x7C381000,0x00000000, 
0x00000018,0x3C3CE7E7,0xE718183C,0x00000000, 
0x00000018,0x3C7EFFFF,0x7E18183C,0x00000000, 
0x00000000,0x0000183C,0x3C180000,0x00000000, 
0xFFFFFFFF,0xFFFFE7C3,0xC3E7FFFF,0xFFFFFFFF, 
0x00000000,0x003C6642,0x42663C00,0x00000000, 
0xFFFFFFFF,0xFFC399BD,0xBD99C3FF,0xFFFFFFFF, 
0x00001E0E,0x1A3278CC,0xCCCCCC78,0x00000000, 
0x00003C66,0x6666663C,0x187E1818,0x00000000, 
0x00003F33,0x3F303030,0x3070F0E0,0x00000000, 
0x00007F63,0x7F636363,0x6367E7E6,0xC0000000, 
0x00000018,0x18DB3CE7,0x3CDB1818,0x00000000, 
0x0080C0E0,0xF0F8FEF8,0xF0E0C080,0x00000000, 
0x0002060E,0x1E3EFE3E,0x1E0E0602,0x00000000, 
0x0000183C,0x7E181818,0x7E3C1800,0x00000000, 
0x00006666,0x66666666,0x66006666,0x00000000, 
0x00007FDB,0xDBDB7B1B,0x1B1B1B1B,0x00000000, 
0x007CC660,0x386CC6C6,0x6C380CC6,0x7C000000, 
0x00000000,0x00000000,0xFEFEFEFE,0x00000000, 
0x0000183C,0x7E181818,0x7E3C187E,0x00000000, 
0x0000183C,0x7E181818,0x18181818,0x00000000, 
0x00001818,0x18181818,0x187E3C18,0x00000000, 
0x00000000,0x00180CFE,0x0C180000,0x00000000, 
0x00000000,0x003060FE,0x60300000,0x00000000, 
0x00000000,0x0000C0C0,0xC0FE0000,0x00000000, 
0x00000000,0x00286CFE,0x6C280000,0x00000000, 
0x00000000,0x1038387C,0x7CFEFE00,0x00000000, 
0x00000000,0xFEFE7C7C,0x38381000,0x00000000, 
0x00000000,0x00000000,0x00000000,0x00000000, 
0x0000183C,0x3C3C1818,0x18001818,0x00000000, 
0x00666666,0x24000000,0x00000000,0x00000000, 
0x0000006C,0x6CFE6C6C,0x6CFE6C6C,0x00000000, 
0x18187CC6,0xC2C07C06,0x0686C67C,0x18180000, 
0x00000000,0xC2C60C18,0x3060C686,0x00000000, 
0x0000386C,0x6C3876DC,0xCCCCCC76,0x00000000, 
0x00303030,0x60000000,0x00000000,0x00000000, 
0x00000C18,0x30303030,0x3030180C,0x00000000, 
0x00003018,0x0C0C0C0C,0x0C0C1830,0x00000000, 
0x00000000,0x00663CFF,0x3C660000,0x00000000, 
0x00000000,0x0018187E,0x18180000,0x00000000, 
0x00000000,0x00000000,0x00181818,0x30000000, 
0x00000000,0x000000FE,0x00000000,0x00000000, 
0x00000000,0x00000000,0x00001818,0x00000000, 
0x00000000,0x02060C18,0x3060C080,0x00000000, 
0x0000386C,0xC6C6D6D6,0xC6C66C38,0x00000000, 
0x00001838,0x78181818,0x1818187E,0x00000000, 
0x00007CC6,0x060C1830,0x60C0C6FE,0x00000000, 
0x00007CC6,0x06063C06,0x0606C67C,0x00000000, 
0x00000C1C,0x3C6CCCFE,0x0C0C0C1E,0x00000000, 
0x0000FEC0,0xC0C0FC06,0x0606C67C,0x00000000, 
0x00003860,0xC0C0FCC6,0xC6C6C67C,0x00000000, 
0x0000FEC6,0x06060C18,0x30303030,0x00000000, 
0x00007CC6,0xC6C67CC6,0xC6C6C67C,0x00000000, 
0x00007CC6,0xC6C67E06,0x06060C78,0x00000000, 
0x00000000,0x18180000,0x00181800,0x00000000, 
0x00000000,0x18180000,0x00181830,0x00000000, 
0x00000006,0x0C183060,0x30180C06,0x00000000, 
0x00000000,0x007E0000,0x7E000000,0x00000000, 
0x00000060,0x30180C06,0x0C183060,0x00000000, 
0x00007CC6,0xC60C1818,0x18001818,0x00000000, 
0x0000007C,0xC6C6DEDE,0xDEDCC07C,0x00000000, 
0x00001038,0x6CC6C6FE,0xC6C6C6C6,0x00000000, 
0x0000FC66,0x66667C66,0x666666FC,0x00000000, 
0x00003C66,0xC2C0C0C0,0xC0C2663C,0x00000000, 
0x0000F86C,0x66666666,0x66666CF8,0x00000000, 
0x0000FE66,0x62687868,0x606266FE,0x00000000, 
0x0000FE66,0x62687868,0x606060F0,0x00000000, 
0x00003C66,0xC2C0C0DE,0xC6C6663A,0x00000000, 
0x0000C6C6,0xC6C6FEC6,0xC6C6C6C6,0x00000000, 
0x00003C18,0x18181818,0x1818183C,0x00000000, 
0x00001E0C,0x0C0C0C0C,0xCCCCCC78,0x00000000, 
0x0000E666,0x666C7878,0x6C6666E6,0x00000000, 
0x0000F060,0x60606060,0x606266FE,0x00000000, 
0x0000C6EE,0xFEFED6C6,0xC6C6C6C6,0x00000000, 
0x0000C6E6,0xF6FEDECE,0xC6C6C6C6,0x00000000, 
0x00007CC6,0xC6C6C6C6,0xC6C6C67C,0x00000000, 
0x0000FC66,0x66667C60,0x606060F0,0x00000000, 
0x00007CC6,0xC6C6C6C6,0xC6D6DE7C,0x0C0E0000, 
0x0000FC66,0x66667C6C,0x666666E6,0x00000000, 
0x00007CC6,0xC660380C,0x06C6C67C,0x00000000, 
0x00007E7E,0x5A181818,0x1818183C,0x00000000, 
0x0000C6C6,0xC6C6C6C6,0xC6C6C67C,0x00000000, 
0x0000C6C6,0xC6C6C6C6,0xC66C3810,0x00000000, 
0x0000C6C6,0xC6C6D6D6,0xD6FEEE6C,0x00000000, 
0x0000C6C6,0x6C7C3838,0x7C6CC6C6,0x00000000, 
0x00006666,0x66663C18,0x1818183C,0x00000000, 
0x0000FEC6,0x860C1830,0x60C2C6FE,0x00000000, 
0x00003C30,0x30303030,0x3030303C,0x00000000, 
0x00000080,0xC0E07038,0x1C0E0602,0x00000000, 
0x00003C0C,0x0C0C0C0C,0x0C0C0C3C,0x00000000, 
0x10386CC6,0x00000000,0x00000000,0x00000000, 
0x00000000,0x00000000,0x00000000,0x00FF0000, 
0x30301800,0x00000000,0x00000000,0x00000000, 
0x00000000,0x00780C7C,0xCCCCCC76,0x00000000, 
0x0000E060,0x60786C66,0x6666667C,0x00000000, 
0x00000000,0x007CC6C0,0xC0C0C67C,0x00000000, 
0x00001C0C,0x0C3C6CCC,0xCCCCCC76,0x00000000, 
0x00000000,0x007CC6FE,0xC0C0C67C,0x00000000, 
0x0000386C,0x6460F060,0x606060F0,0x00000000, 
0x00000000,0x0076CCCC,0xCCCCCC7C,0x0CCC7800, 
0x0000E060,0x606C7666,0x666666E6,0x00000000, 
0x00001818,0x00381818,0x1818183C,0x00000000, 
0x00000606,0x000E0606,0x06060606,0x66663C00, 
0x0000E060,0x60666C78,0x786C66E6,0x00000000, 
0x00003818,0x18181818,0x1818183C,0x00000000, 
0x00000000,0x00ECFED6,0xD6D6D6C6,0x00000000, 
0x00000000,0x00DC6666,0x66666666,0x00000000, 
0x00000000,0x007CC6C6,0xC6C6C67C,0x00000000, 
0x00000000,0x00DC6666,0x6666667C,0x6060F000, 
0x00000000,0x0076CCCC,0xCCCCCC7C,0x0C0C1E00, 
0x00000000,0x00DC7666,0x606060F0,0x00000000, 
0x00000000,0x007CC660,0x380CC67C,0x00000000, 
0x00001030,0x30FC3030,0x3030361C,0x00000000, 
0x00000000,0x00CCCCCC,0xCCCCCC76,0x00000000, 
0x00000000,0x00666666,0x66663C18,0x00000000, 
0x00000000,0x00C6C6D6,0xD6D6FE6C,0x00000000, 
0x00000000,0x00C66C38,0x38386CC6,0x00000000, 
0x00000000,0x00C6C6C6,0xC6C6C67E,0x060CF800, 
0x00000000,0x00FECC18,0x3060C6FE,0x00000000, 
0x00000E18,0x18187018,0x1818180E,0x00000000, 
0x00001818,0x18180018,0x18181818,0x00000000, 
0x00007018,0x18180E18,0x18181870,0x00000000, 
0x000076DC,0x00000000,0x00000000,0x00000000, 
0x00000000,0x10386CC6,0xC6C6FE00,0x00000000, 
0x00003C66,0xC2C0C0C0,0xC2663C0C,0x067C0000, 
0x0000CC00,0x00CCCCCC,0xCCCCCC76,0x00000000, 
0x000C1830,0x007CC6FE,0xC0C0C67C,0x00000000, 
0x0010386C,0x00780C7C,0xCCCCCC76,0x00000000, 
0x0000CC00,0x00780C7C,0xCCCCCC76,0x00000000, 
0x00603018,0x00780C7C,0xCCCCCC76,0x00000000, 
0x00386C38,0x00780C7C,0xCCCCCC76,0x00000000, 
0x00000000,0x3C666060,0x663C0C06,0x3C000000, 
0x0010386C,0x007CC6FE,0xC0C0C67C,0x00000000, 
0x0000C600,0x007CC6FE,0xC0C0C67C,0x00000000, 
0x00603018,0x007CC6FE,0xC0C0C67C,0x00000000, 
0x00006600,0x00381818,0x1818183C,0x00000000, 
0x00183C66,0x00381818,0x1818183C,0x00000000, 
0x00603018,0x00381818,0x1818183C,0x00000000, 
0x00C60010,0x386CC6C6,0xFEC6C6C6,0x00000000, 
0x386C3800,0x386CC6C6,0xFEC6C6C6,0x00000000, 
0x18306000,0xFE66607C,0x606066FE,0x00000000, 
0x00000000,0x00CC7636,0x7ED8D86E,0x00000000, 
0x00003E6C,0xCCCCFECC,0xCCCCCCCE,0x00000000, 
0x0010386C,0x007CC6C6,0xC6C6C67C,0x00000000, 
0x0000C600,0x007CC6C6,0xC6C6C67C,0x00000000, 
0x00603018,0x007CC6C6,0xC6C6C67C,0x00000000, 
0x003078CC,0x00CCCCCC,0xCCCCCC76,0x00000000, 
0x00603018,0x00CCCCCC,0xCCCCCC76,0x00000000, 
0x0000C600,0x00C6C6C6,0xC6C6C67E,0x060C7800, 
0x00C6007C,0xC6C6C6C6,0xC6C6C67C,0x00000000, 
0x00C600C6,0xC6C6C6C6,0xC6C6C67C,0x00000000, 
0x0018183C,0x66606060,0x663C1818,0x00000000, 
0x00386C64,0x60F06060,0x6060E6FC,0x00000000, 
0x00006666,0x3C187E18,0x7E181818,0x00000000, 
0x00F8CCCC,0xF8C4CCDE,0xCCCCCCC6,0x00000000, 
0x000E1B18,0x18187E18,0x18181818,0xD8700000, 
0x00183060,0x00780C7C,0xCCCCCC76,0x00000000, 
0x000C1830,0x00381818,0x1818183C,0x00000000, 
0x00183060,0x007CC6C6,0xC6C6C67C,0x00000000, 
0x00183060,0x00CCCCCC,0xCCCCCC76,0x00000000, 
0x000076DC,0x00DC6666,0x66666666,0x00000000, 
0x76DC00C6,0xE6F6FEDE,0xCEC6C6C6,0x00000000, 
0x003C6C6C,0x3E007E00,0x00000000,0x00000000, 
0x00386C6C,0x38007C00,0x00000000,0x00000000, 
0x00003030,0x00303060,0xC0C6C67C,0x00000000, 
0x00000000,0x0000FEC0,0xC0C0C000,0x00000000, 
0x00000000,0x0000FE06,0x06060600,0x00000000, 
0x00C0C0C2,0xC6CC1830,0x60DC860C,0x183E0000, 
0x00C0C0C2,0xC6CC1830,0x66CE9E3E,0x06060000, 
0x00001818,0x00181818,0x3C3C3C18,0x00000000, 
0x00000000,0x00366CD8,0x6C360000,0x00000000, 
0x00000000,0x00D86C36,0x6CD80000,0x00000000, 
0x11441144,0x11441144,0x11441144,0x11441144, 
0x55AA55AA,0x55AA55AA,0x55AA55AA,0x55AA55AA, 
0xDD77DD77,0xDD77DD77,0xDD77DD77,0xDD77DD77, 
0x18181818,0x18181818,0x18181818,0x18181818, 
0x18181818,0x181818F8,0x18181818,0x18181818, 
0x18181818,0x18F818F8,0x18181818,0x18181818, 
0x36363636,0x363636F6,0x36363636,0x36363636, 
0x00000000,0x000000FE,0x36363636,0x36363636, 
0x00000000,0x00F818F8,0x18181818,0x18181818, 
0x36363636,0x36F606F6,0x36363636,0x36363636, 
0x36363636,0x36363636,0x36363636,0x36363636, 
0x00000000,0x00FE06F6,0x36363636,0x36363636, 
0x36363636,0x36F606FE,0x00000000,0x00000000, 
0x36363636,0x363636FE,0x00000000,0x00000000, 
0x18181818,0x18F818F8,0x00000000,0x00000000, 
0x00000000,0x000000F8,0x18181818,0x18181818, 
0x18181818,0x1818181F,0x00000000,0x00000000, 
0x18181818,0x181818FF,0x00000000,0x00000000, 
0x00000000,0x000000FF,0x18181818,0x18181818, 
0x18181818,0x1818181F,0x18181818,0x18181818, 
0x00000000,0x000000FF,0x00000000,0x00000000, 
0x18181818,0x181818FF,0x18181818,0x18181818, 
0x18181818,0x181F181F,0x18181818,0x18181818, 
0x36363636,0x36363637,0x36363636,0x36363636, 
0x36363636,0x3637303F,0x00000000,0x00000000, 
0x00000000,0x003F3037,0x36363636,0x36363636, 
0x36363636,0x36F700FF,0x00000000,0x00000000, 
0x00000000,0x00FF00F7,0x36363636,0x36363636, 
0x36363636,0x36373037,0x36363636,0x36363636, 
0x00000000,0x00FF00FF,0x00000000,0x00000000, 
0x36363636,0x36F700F7,0x36363636,0x36363636, 
0x18181818,0x18FF00FF,0x00000000,0x00000000, 
0x36363636,0x363636FF,0x00000000,0x00000000, 
0x00000000,0x00FF00FF,0x18181818,0x18181818, 
0x00000000,0x000000FF,0x36363636,0x36363636, 
0x36363636,0x3636363F,0x00000000,0x00000000, 
0x18181818,0x181F181F,0x00000000,0x00000000, 
0x00000000,0x001F181F,0x18181818,0x18181818, 
0x00000000,0x0000003F,0x36363636,0x36363636, 
0x36363636,0x363636FF,0x36363636,0x36363636, 
0x18181818,0x18FF18FF,0x18181818,0x18181818, 
0x18181818,0x181818F8,0x00000000,0x00000000, 
0x00000000,0x0000001F,0x18181818,0x18181818, 
0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF,0xFFFFFFFF, 
0x00000000,0x000000FF,0xFFFFFFFF,0xFFFFFFFF, 
0xF0F0F0F0,0xF0F0F0F0,0xF0F0F0F0,0xF0F0F0F0, 
0x0F0F0F0F,0x0F0F0F0F,0x0F0F0F0F,0x0F0F0F0F, 
0xFFFFFFFF,0xFFFFFF00,0x00000000,0x00000000, 
0x00000000,0x0076DCD8,0xD8D8DC76,0x00000000, 
0x000078CC,0xCCCCD8CC,0xC6C6C6CC,0x00000000, 
0x0000FEC6,0xC6C0C0C0,0xC0C0C0C0,0x00000000, 
0x00000000,0xFE6C6C6C,0x6C6C6C6C,0x00000000, 
0x000000FE,0xC6603018,0x3060C6FE,0x00000000, 
0x00000000,0x007ED8D8,0xD8D8D870,0x00000000, 
0x00000000,0x66666666,0x667C6060,0xC0000000, 
0x00000000,0x76DC1818,0x18181818,0x00000000, 
0x0000007E,0x183C6666,0x663C187E,0x00000000, 
0x00000038,0x6CC6C6FE,0xC6C66C38,0x00000000, 
0x0000386C,0xC6C6C66C,0x6C6C6CEE,0x00000000, 
0x00001E30,0x180C3E66,0x6666663C,0x00000000, 
0x00000000,0x007EDBDB,0xDB7E0000,0x00000000, 
0x00000003,0x067EDBDB,0xF37E60C0,0x00000000, 
0x00001C30,0x60607C60,0x6060301C,0x00000000, 
0x0000007C,0xC6C6C6C6,0xC6C6C6C6,0x00000000, 
0x00000000,0xFE0000FE,0x0000FE00,0x00000000, 
0x00000000,0x18187E18,0x180000FF,0x00000000, 
0x00000030,0x180C060C,0x1830007E,0x00000000, 
0x0000000C,0x18306030,0x180C007E,0x00000000, 
0x00000E1B,0x1B181818,0x18181818,0x18181818, 
0x18181818,0x18181818,0xD8D8D870,0x00000000, 
0x00000000,0x1818007E,0x00181800,0x00000000, 
0x00000000,0x0076DC00,0x76DC0000,0x00000000, 
0x00386C6C,0x38000000,0x00000000,0x00000000, 
0x00000000,0x00000018,0x18000000,0x00000000, 
0x00000000,0x00000000,0x18000000,0x00000000, 
0x000F0C0C,0x0C0C0CEC,0x6C6C3C1C,0x00000000, 
0x00D86C6C,0x6C6C6C00,0x00000000,0x00000000, 
0x0070D830,0x60C8F800,0x00000000,0x00000000, 
0x00000000,0x7C7C7C7C,0x7C7C7C00,0x00000000, 
0x00000000,0x00000000,0x00000000,0x00000000
};

#define hasGB t

int x;
int y;
int screen_base;
int screenInited = 0;
int stdioInit(int screenBase){
  x = 0;
  y = 0;
  IOWR(VGA, VGA_BASE, screenBase);//1024=2Mbyte
  screen_base = screenBase*2048;
  for(int i=0;i<0x80000;i++){
    ((int*)(screen_base))[i] = 0;//at 2Mbyte
  }
  screenInited = 1;
}

void putc(int chr){
  if(screenInited){
    if(chr == 0x0D || chr == 0x0A){
    }else{
      for(int j=0;j<16;j++){
        void* addr;
        for(int i=0;i<8;i++){
          int a = (chr*4) + (j>>2);
          int b = ((3-(j&3))<<3)  +  (7-i);
          int val = char_table[a]>>( b ) & 1;
          int calc_x = x * 8 + i;
          int calc_y = y * 16 + j;
          addr = (void*)(screen_base+(calc_x+calc_y*1024)*2);
          *((short*)(addr)) = val?0xFFFF:0x0000;
        }
        flushCache(addr);
      }
    }
    x++;
    if(x==80 || (chr == 0x0A)){
      x=0;
      y++;
      if(y>=30){
        y=0;
      }
      for(int j=0;j<16;j++){
        void* addr;
        for(int i=0;i<1024;i+=2){
          int calc_x = x * 8 + i;
          int calc_y = y * 16 + j;
          addr = (void*)(screen_base+(calc_x+calc_y*1024)*2);
          *((int*)(addr)) = 0;
        }
        flushCache(addr);
      }
      
    }
  }

}


int* gb_char_table;

int setGbCharTable(int* v){
  gb_char_table = v;
}

void putcgb(int chr){
  if(screenInited){
    for(int j=0;j<16;j++){
      void* addr;
      int a = (chr<<3) + (j>>1);
      int calc_y = y * 16 + j;
      for(int i=0;i<8;i++){
        int b = (((j&1))<<4)  +  (7-i);
        //printInt(a);print(" ");
        //printInt(b);print(" ");
        int val = gb_char_table[a]>>( b ) & 1;
        //uart_write('0'+val);print("\r\n");
        int calc_x = x * 8 + i;
        addr = (void*)(screen_base+(calc_x+calc_y*1024)*2);
        *((short*)(addr)) = val?0xFFFF:0x0000;
      }
      for(int i=0;i<8;i++){
        int b = (((j&1))<<4)  +  (7-i) + 8;
        //printInt(a);print(" ");
        //printInt(b);print(" ");
        int val = gb_char_table[a]>>( b ) & 1;
        //uart_write('0'+val);print("\r\n");
        int calc_x = x * 8 + i + 8;
        addr = (void*)(screen_base+(calc_x+calc_y*1024)*2);
        *((short*)(addr)) = val?0xFFFF:0x0000;
      }
      flushCache(addr);
    }
    x+=2;
    if(x==80){
      x=0;
      y++;
      if(y>=30){
        y=0;
      }
      
      for(int j=0;j<16;j++){
        void* addr;
        for(int i=0;i<1024;i+=2){
          int calc_x = x * 8 + i;
          int calc_y = y * 16 + j;
          addr = (void*)(screen_base+(calc_x+calc_y*1024)*2);
          *((int*)(addr)) = 0;
        }
        flushCache(addr);
      }
      
    }
  }

}

#define PS2_TAB				9
#define PS2_ENTER			10
#define PS2_BACKSPACE			127
#define PS2_ESC				27
#define PS2_INSERT			0
#define PS2_DELETE			127
#define PS2_HOME			0
#define PS2_END				0
#define PS2_PAGEUP			25
#define PS2_PAGEDOWN			26
#define PS2_UPARROW			11
#define PS2_LEFTARROW			8
#define PS2_DOWNARROW			10
#define PS2_RIGHTARROW			21
#define PS2_F1				0
#define PS2_F2				0
#define PS2_F3				0
#define PS2_F4				0
#define PS2_F5				0
#define PS2_F6				0
#define PS2_F7				0
#define PS2_F8				0
#define PS2_F9				0
#define PS2_F10				0
#define PS2_F11				0
#define PS2_F12				0
#define PS2_SCROLL			0

//int b[1000000];

int PS2Keymap_US[] = {
  // without shift
	0, PS2_F9, 0, PS2_F5, PS2_F3, PS2_F1, PS2_F2, PS2_F12,
	0, PS2_F10, PS2_F8, PS2_F6, PS2_F4, PS2_TAB, '`', 0,
	0, 0 /*Lalt*/, 0 /*Lshift*/, 0, 0 /*Lctrl*/, 'q', '1', 0,
	0, 0, 'z', 's', 'a', 'w', '2', 0,
	0, 'c', 'x', 'd', 'e', '4', '3', 0,
	0, ' ', 'v', 'f', 't', 'r', '5', 0,
	0, 'n', 'b', 'h', 'g', 'y', '6', 0,
	0, 0, 'm', 'j', 'u', '7', '8', 0,
	0, ',', 'k', 'i', 'o', '0', '9', 0,
	0, '.', '/', 'l', ';', 'p', '-', 0,
	0, 0, '\'', 0, '[', '=', 0, 0,
	0 /*CapsLock*/, 0 /*Rshift*/, PS2_ENTER /*Enter*/, ']', 0, '\\', 0, 0,
	0, 0, 0, 0, 0, 0, PS2_BACKSPACE, 0,
	0, '1', 0, '4', '7', 0, 0, 0,
	'0', '.', '2', '5', '6', '8', PS2_ESC, 0 /*NumLock*/,
	PS2_F11, '+', '3', '-', '*', '9', PS2_SCROLL, 0,
	0, 0, 0, PS2_F7 };

int getc(){

  while(1){
    int hid_value = IORD(HID, 0);
    if((hid_value & 0x0F000000) == 0x01000000){
      //key
      if(((hid_value & 0x00008000) != 0x00008000) && ((hid_value & 0x00800000) != 0x00800000)){
        int tmp = PS2Keymap_US[hid_value & 0xFF];
        putc(tmp);
        return tmp;
      }
    }
  }
}
